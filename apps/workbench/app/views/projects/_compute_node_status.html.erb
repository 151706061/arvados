
<div class="compute-summary-nodelist">
    <% nodes.sort_by { |n| n.hostname || "" }.each do |n| %>
      <% if n.crunch_worker_state.in? ["busy", "idle"] %>
        <div class="compute-summary">
          <a data-toggle="collapse" href="#detail_<%= n.hostname %>" class="compute-summary-head label label-<%= if n.crunch_worker_state == 'busy' then 'primary' else 'default' end %>">
            <%= n.hostname %>
          </a>
          <div id="detail_<%= n.hostname %>" class="collapse compute-detail">
            state: <%= n.crunch_worker_state %><br>
            <% [:total_cpu_cores, :total_ram_mb, :total_scratch_mb].each do |i| %>
              <%= i.to_s.gsub '_', ' ' %>: <%= n.info[i] %><br>
            <% end %>
          </div>
        </div>
      <% end %>
    <% end %>
</div>
